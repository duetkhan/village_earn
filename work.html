<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Village Earn - Work</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Monetag Multi Tag JS -->
  <!-- Banner -->
  <script src="https://quge5.com/88/tag.min.js" data-zone="204416" async data-cfasync="false"></script>
  <!-- Interstitial -->
  <script src="https://quge5.com/88/tag.min.js" data-zone="INTERSTITIAL_ZONE_ID" async data-cfasync="false"></script>
  <!-- Rewarded -->
  <script src="https://quge5.com/88/tag.min.js" data-zone="REWARDED_ZONE_ID" async data-cfasync="false"></script>
</head>
<body>
  <header>
    <h1>Village Earn</h1>
  </header>

  <main>
    <h2>Start Working!</h2>
    <button id="startWorkBtn">Start Work</button>

...
<!-- page content -->

<!-- Monetag already here -->

<!-- Adsterra Banner -->
<div class="adsterra-banner">
  <script type="text/javascript">
    atOptions = {
      'key' : '5552138',
      'format' : 'iframe',
      'height' : 50,
      'width' : 320,
      'params' : {}
    };
  </script>
  <script type="text/javascript" src="//www.highperformanceformat.com/5552138/invoke.js"></script>
</div>

</body>
</html>

    
    <div id="floatingBtnContainer"></div>
    <p>Balance: <span id="balance">0</span> ৳</p>

    <!-- Banner Ad -->
    <div id="bannerAd"></div>
  </main>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let balance = 0;
    let adCount = 0;

    const balanceEl = document.getElementById('balance');
    const floatingContainer = document.getElementById('floatingBtnContainer');

    function updateBalance(amount) {
      balance += amount;
      balanceEl.innerText = balance;
    }

    function showFloatingButton() {
      floatingContainer.innerHTML = '<button id="floatingBtn">Watch Rewarded Ad (+5 ৳)</button>';
      document.getElementById('floatingBtn').addEventListener('click', () => {
        if(window.show_rewarded) {
          show_rewarded().then(() => {
            updateBalance(5);
            floatingContainer.innerHTML = '';
          }).catch(console.error);
        }
      });
    }

    document.getElementById('startWorkBtn').addEventListener('click', () => {
      if(window.show_10497540) {
        show_10497540().then(() => {
          adCount++;
          if(adCount >= 20) {
            showFloatingButton();
            adCount = 0;
          }
        }).catch(console.error);
      }
    });
  </script>
</body>
</html>

